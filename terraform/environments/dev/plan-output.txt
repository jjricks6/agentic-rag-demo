[0m[1mdata.aws_region.current: Reading...[0m[0m
[0m[1mmodule.s3_storage.data.aws_region.current: Reading...[0m[0m
[0m[1mmodule.s3_vectors.data.aws_region.current: Reading...[0m[0m
[0m[1mmodule.iam_roles.data.aws_region.current: Reading...[0m[0m
[0m[1mmodule.cloudwatch_logs.data.aws_region.current: Reading...[0m[0m
[0m[1mmodule.s3_storage.data.aws_caller_identity.current: Reading...[0m[0m
[0m[1mdata.aws_caller_identity.current: Reading...[0m[0m
[0m[1mmodule.cloudwatch_logs.data.aws_caller_identity.current: Reading...[0m[0m
[0m[1mmodule.s3_storage.data.aws_region.current: Read complete after 0s [id=us-east-1][0m
[0m[1mmodule.s3_vectors.data.aws_region.current: Read complete after 0s [id=us-east-1][0m
[0m[1mmodule.iam_roles.data.aws_region.current: Read complete after 0s [id=us-east-1][0m
[0m[1mmodule.cloudwatch_logs.data.aws_region.current: Read complete after 0s [id=us-east-1][0m
[0m[1mdata.aws_region.current: Read complete after 0s [id=us-east-1][0m
[0m[1mmodule.s3_vectors.data.aws_caller_identity.current: Reading...[0m[0m
[0m[1mmodule.iam_roles.data.aws_caller_identity.current: Reading...[0m[0m
[0m[1mmodule.cloudwatch_logs.data.aws_caller_identity.current: Read complete after 0s [id=153772056475][0m
[0m[1mmodule.s3_storage.data.aws_caller_identity.current: Read complete after 0s [id=153772056475][0m
[0m[1mdata.aws_caller_identity.current: Read complete after 0s [id=153772056475][0m
[0m[1mmodule.s3_vectors.data.aws_caller_identity.current: Read complete after 0s [id=153772056475][0m
[0m[1mmodule.iam_roles.data.aws_caller_identity.current: Read complete after 0s [id=153772056475][0m
[0m[1mmodule.iam_roles.data.aws_iam_policy_document.agent_assume_role: Reading...[0m[0m
[0m[1mmodule.iam_roles.data.aws_iam_policy_document.bedrock: Reading...[0m[0m
[0m[1mmodule.iam_roles.data.aws_iam_policy_document.bedrock: Read complete after 0s [id=2142658961][0m
[0m[1mmodule.iam_roles.data.aws_iam_policy_document.agent_assume_role: Read complete after 0s [id=521836750][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m
 [36m<=[0m read (data resources)[0m

Terraform will perform the following actions:

[1m  # aws_iam_role.lambda_execution[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "lambda_execution" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = "lambda.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "agentic-rag-demo-lambda-dev"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # aws_iam_role_policy.lambda_policy[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "lambda_policy" {
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "agentic-rag-demo-lambda-policy-dev"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m policy      = (known after apply)
      [32m+[0m[0m role        = (known after apply)
    }

[1m  # aws_lambda_function.document_handler[0m will be created
[0m  [32m+[0m[0m resource "aws_lambda_function" "document_handler" {
      [32m+[0m[0m architectures                  = (known after apply)
      [32m+[0m[0m arn                            = (known after apply)
      [32m+[0m[0m code_sha256                    = (known after apply)
      [32m+[0m[0m filename                       = "./lambda-placeholder.zip"
      [32m+[0m[0m function_name                  = "agentic-rag-demo-document-handler-dev"
      [32m+[0m[0m handler                        = "index.handler"
      [32m+[0m[0m id                             = (known after apply)
      [32m+[0m[0m invoke_arn                     = (known after apply)
      [32m+[0m[0m last_modified                  = (known after apply)
      [32m+[0m[0m memory_size                    = 512
      [32m+[0m[0m package_type                   = "Zip"
      [32m+[0m[0m publish                        = false
      [32m+[0m[0m qualified_arn                  = (known after apply)
      [32m+[0m[0m qualified_invoke_arn           = (known after apply)
      [32m+[0m[0m region                         = "us-east-1"
      [32m+[0m[0m reserved_concurrent_executions = -1
      [32m+[0m[0m response_streaming_invoke_arn  = (known after apply)
      [32m+[0m[0m role                           = (known after apply)
      [32m+[0m[0m runtime                        = "python3.11"
      [32m+[0m[0m signing_job_arn                = (known after apply)
      [32m+[0m[0m signing_profile_version_arn    = (known after apply)
      [32m+[0m[0m skip_destroy                   = false
      [32m+[0m[0m source_code_hash               = (known after apply)
      [32m+[0m[0m source_code_size               = (known after apply)
      [32m+[0m[0m tags                           = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all                       = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
      [32m+[0m[0m timeout                        = 60
      [32m+[0m[0m version                        = (known after apply)

      [32m+[0m[0m environment {
          [32m+[0m[0m variables = (known after apply)
        }
    }

[1m  # aws_lambda_function.search_handler[0m will be created
[0m  [32m+[0m[0m resource "aws_lambda_function" "search_handler" {
      [32m+[0m[0m architectures                  = (known after apply)
      [32m+[0m[0m arn                            = (known after apply)
      [32m+[0m[0m code_sha256                    = (known after apply)
      [32m+[0m[0m filename                       = "./lambda-placeholder.zip"
      [32m+[0m[0m function_name                  = "agentic-rag-demo-search-handler-dev"
      [32m+[0m[0m handler                        = "index.handler"
      [32m+[0m[0m id                             = (known after apply)
      [32m+[0m[0m invoke_arn                     = (known after apply)
      [32m+[0m[0m last_modified                  = (known after apply)
      [32m+[0m[0m memory_size                    = 256
      [32m+[0m[0m package_type                   = "Zip"
      [32m+[0m[0m publish                        = false
      [32m+[0m[0m qualified_arn                  = (known after apply)
      [32m+[0m[0m qualified_invoke_arn           = (known after apply)
      [32m+[0m[0m region                         = "us-east-1"
      [32m+[0m[0m reserved_concurrent_executions = -1
      [32m+[0m[0m response_streaming_invoke_arn  = (known after apply)
      [32m+[0m[0m role                           = (known after apply)
      [32m+[0m[0m runtime                        = "python3.11"
      [32m+[0m[0m signing_job_arn                = (known after apply)
      [32m+[0m[0m signing_profile_version_arn    = (known after apply)
      [32m+[0m[0m skip_destroy                   = false
      [32m+[0m[0m source_code_hash               = (known after apply)
      [32m+[0m[0m source_code_size               = (known after apply)
      [32m+[0m[0m tags                           = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all                       = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
      [32m+[0m[0m timeout                        = 30
      [32m+[0m[0m version                        = (known after apply)

      [32m+[0m[0m environment {
          [32m+[0m[0m variables = {
              [32m+[0m[0m "EMBEDDING_MODEL" = "amazon.titan-embed-text-v2:0"
              [32m+[0m[0m "ENVIRONMENT"     = "dev"
              [32m+[0m[0m "VECTORS_BUCKET"  = "agentic-rag-demo-vectors-dev-153772056475"
              [32m+[0m[0m "VECTOR_INDEX"    = "agentic-rag-demo-index-dev"
            }
        }
    }

[1m  # aws_lambda_permission.allow_bedrock_document[0m will be created
[0m  [32m+[0m[0m resource "aws_lambda_permission" "allow_bedrock_document" {
      [32m+[0m[0m action              = "lambda:InvokeFunction"
      [32m+[0m[0m function_name       = "agentic-rag-demo-document-handler-dev"
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m principal           = "bedrock.amazonaws.com"
      [32m+[0m[0m region              = "us-east-1"
      [32m+[0m[0m source_arn          = "arn:aws:bedrock:us-east-1:153772056475:agent/*"
      [32m+[0m[0m statement_id        = "AllowBedrockAgent"
      [32m+[0m[0m statement_id_prefix = (known after apply)
    }

[1m  # aws_lambda_permission.allow_bedrock_search[0m will be created
[0m  [32m+[0m[0m resource "aws_lambda_permission" "allow_bedrock_search" {
      [32m+[0m[0m action              = "lambda:InvokeFunction"
      [32m+[0m[0m function_name       = "agentic-rag-demo-search-handler-dev"
      [32m+[0m[0m id                  = (known after apply)
      [32m+[0m[0m principal           = "bedrock.amazonaws.com"
      [32m+[0m[0m region              = "us-east-1"
      [32m+[0m[0m source_arn          = "arn:aws:bedrock:us-east-1:153772056475:agent/*"
      [32m+[0m[0m statement_id        = "AllowBedrockAgent"
      [32m+[0m[0m statement_id_prefix = (known after apply)
    }

[1m  # module.bedrock_agent.data.aws_caller_identity.current[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_caller_identity" "current" {
      [32m+[0m[0m account_id = (known after apply)
      [32m+[0m[0m arn        = (known after apply)
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m user_id    = (known after apply)
    }

[1m  # module.bedrock_agent.data.aws_region.current[0m will be read during apply
  # (depends on a resource or a module with changes pending)
[0m [36m<=[0m[0m data "aws_region" "current" {
      [32m+[0m[0m description = (known after apply)
      [32m+[0m[0m endpoint    = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = (known after apply)
      [32m+[0m[0m region      = (known after apply)
    }

[1m  # module.bedrock_agent.aws_bedrockagent_agent.rag_agent[0m will be created
[0m  [32m+[0m[0m resource "aws_bedrockagent_agent" "rag_agent" {
      [32m+[0m[0m agent_arn                     = (known after apply)
      [32m+[0m[0m agent_collaboration           = (known after apply)
      [32m+[0m[0m agent_id                      = (known after apply)
      [32m+[0m[0m agent_name                    = "agentic-rag-demo-agent-dev"
      [32m+[0m[0m agent_resource_role_arn       = (known after apply)
      [32m+[0m[0m agent_version                 = (known after apply)
      [32m+[0m[0m description                   = "Bidirectional RAG agent for agentic-rag-demo - dev environment"
      [32m+[0m[0m foundation_model              = "anthropic.claude-3-5-sonnet-20250110-v1:0"
      [32m+[0m[0m id                            = (known after apply)
      [32m+[0m[0m idle_session_ttl_in_seconds   = 600
      [32m+[0m[0m instruction                   = <<-EOT
            You are a helpful AI assistant specializing in document management and retrieval for the Agentic RAG Demo.
            
            Your capabilities include:
            1. **Document Upload**: Accept documents from users and store them securely in S3
            2. **Document Search**: Search through uploaded documents to find relevant information
            3. **Question Answering**: Answer questions based on the content of stored documents
            4. **Document Management**: List and delete documents as needed
            
            Guidelines:
            - Always acknowledge document uploads and confirm successful indexing
            - When answering questions, cite the specific documents you're referencing
            - If you can't find relevant information, say so clearly
            - Be concise but thorough in your responses
            - Maintain a professional and helpful tone
            
            This is a development environment, so feel free to be more verbose about what you're doing.
        EOT
      [32m+[0m[0m memory_configuration          = (known after apply)
      [32m+[0m[0m prepare_agent                 = true
      [32m+[0m[0m prepared_at                   = (known after apply)
      [32m+[0m[0m prompt_override_configuration = (known after apply)
      [32m+[0m[0m region                        = "us-east-1"
      [32m+[0m[0m skip_resource_in_use_check    = false
      [32m+[0m[0m tags                          = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-agent-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "RAG Agent"
        }
      [32m+[0m[0m tags_all                      = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-agent-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "RAG Agent"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.bedrock_agent.aws_bedrockagent_agent_action_group.document_management[0m will be created
[0m  [32m+[0m[0m resource "aws_bedrockagent_agent_action_group" "document_management" {
      [32m+[0m[0m action_group_id            = (known after apply)
      [32m+[0m[0m action_group_name          = "document-management"
      [32m+[0m[0m action_group_state         = (known after apply)
      [32m+[0m[0m agent_id                   = (known after apply)
      [32m+[0m[0m agent_version              = "DRAFT"
      [32m+[0m[0m description                = "Actions for managing documents in S3"
      [32m+[0m[0m id                         = (known after apply)
      [32m+[0m[0m prepare_agent              = true
      [32m+[0m[0m region                     = "us-east-1"
      [32m+[0m[0m skip_resource_in_use_check = false

      [32m+[0m[0m action_group_executor {
          [32m+[0m[0m lambda = (known after apply)
        }

      [32m+[0m[0m api_schema {
          [32m+[0m[0m payload = jsonencode(
                {
                  [32m+[0m[0m info    = {
                      [32m+[0m[0m title   = "Document Management API"
                      [32m+[0m[0m version = "1.0.0"
                    }
                  [32m+[0m[0m openapi = "3.0.0"
                  [32m+[0m[0m paths   = {
                      [32m+[0m[0m "/documents/list"         = {
                          [32m+[0m[0m get = {
                              [32m+[0m[0m description = "Retrieves a list of all documents in storage"
                              [32m+[0m[0m operationId = "listDocuments"
                              [32m+[0m[0m responses   = {
                                  [32m+[0m[0m "200" = {
                                      [32m+[0m[0m content     = {
                                          [32m+[0m[0m "application/json" = {
                                              [32m+[0m[0m schema = {
                                                  [32m+[0m[0m properties = {
                                                      [32m+[0m[0m documents = {
                                                          [32m+[0m[0m items = {
                                                              [32m+[0m[0m properties = {
                                                                  [32m+[0m[0m document_id = {
                                                                      [32m+[0m[0m type = "string"
                                                                    }
                                                                  [32m+[0m[0m filename    = {
                                                                      [32m+[0m[0m type = "string"
                                                                    }
                                                                  [32m+[0m[0m upload_date = {
                                                                      [32m+[0m[0m type = "string"
                                                                    }
                                                                }
                                                              [32m+[0m[0m type       = "object"
                                                            }
                                                          [32m+[0m[0m type  = "array"
                                                        }
                                                    }
                                                  [32m+[0m[0m type       = "object"
                                                }
                                            }
                                        }
                                      [32m+[0m[0m description = "List of documents"
                                    }
                                }
                              [32m+[0m[0m summary     = "List all documents"
                            }
                        }
                      [32m+[0m[0m "/documents/upload"       = {
                          [32m+[0m[0m post = {
                              [32m+[0m[0m description = "Uploads a document to S3 storage for embedding and indexing"
                              [32m+[0m[0m operationId = "uploadDocument"
                              [32m+[0m[0m requestBody = {
                                  [32m+[0m[0m content  = {
                                      [32m+[0m[0m "application/json" = {
                                          [32m+[0m[0m schema = {
                                              [32m+[0m[0m properties = {
                                                  [32m+[0m[0m content  = {
                                                      [32m+[0m[0m description = "Base64 encoded document content"
                                                      [32m+[0m[0m type        = "string"
                                                    }
                                                  [32m+[0m[0m filename = {
                                                      [32m+[0m[0m description = "Name of the document file"
                                                      [32m+[0m[0m type        = "string"
                                                    }
                                                  [32m+[0m[0m metadata = {
                                                      [32m+[0m[0m description = "Additional metadata for the document"
                                                      [32m+[0m[0m type        = "object"
                                                    }
                                                }
                                              [32m+[0m[0m required   = [
                                                  [32m+[0m[0m "filename",
                                                  [32m+[0m[0m "content",
                                                ]
                                              [32m+[0m[0m type       = "object"
                                            }
                                        }
                                    }
                                  [32m+[0m[0m required = true
                                }
                              [32m+[0m[0m responses   = {
                                  [32m+[0m[0m "200" = {
                                      [32m+[0m[0m content     = {
                                          [32m+[0m[0m "application/json" = {
                                              [32m+[0m[0m schema = {
                                                  [32m+[0m[0m properties = {
                                                      [32m+[0m[0m document_id = {
                                                          [32m+[0m[0m description = "Unique identifier for the document"
                                                          [32m+[0m[0m type        = "string"
                                                        }
                                                      [32m+[0m[0m status      = {
                                                          [32m+[0m[0m type = "string"
                                                        }
                                                    }
                                                  [32m+[0m[0m type       = "object"
                                                }
                                            }
                                        }
                                      [32m+[0m[0m description = "Document uploaded successfully"
                                    }
                                }
                              [32m+[0m[0m summary     = "Upload a document to S3"
                            }
                        }
                      [32m+[0m[0m "/documents/{documentId}" = {
                          [32m+[0m[0m delete = {
                              [32m+[0m[0m description = "Deletes a document and its embeddings"
                              [32m+[0m[0m operationId = "deleteDocument"
                              [32m+[0m[0m parameters  = [
                                  [32m+[0m[0m {
                                      [32m+[0m[0m description = "ID of the document to delete"
                                      [32m+[0m[0m in          = "path"
                                      [32m+[0m[0m name        = "documentId"
                                      [32m+[0m[0m required    = true
                                      [32m+[0m[0m schema      = {
                                          [32m+[0m[0m type = "string"
                                        }
                                    },
                                ]
                              [32m+[0m[0m responses   = {
                                  [32m+[0m[0m "200" = {
                                      [32m+[0m[0m description = "Document deleted successfully"
                                    }
                                }
                              [32m+[0m[0m summary     = "Delete a document"
                            }
                        }
                    }
                }
            )
        }
    }

[1m  # module.bedrock_agent.aws_bedrockagent_agent_action_group.vector_search[0m will be created
[0m  [32m+[0m[0m resource "aws_bedrockagent_agent_action_group" "vector_search" {
      [32m+[0m[0m action_group_id            = (known after apply)
      [32m+[0m[0m action_group_name          = "vector-search"
      [32m+[0m[0m action_group_state         = (known after apply)
      [32m+[0m[0m agent_id                   = (known after apply)
      [32m+[0m[0m agent_version              = "DRAFT"
      [32m+[0m[0m description                = "Actions for searching vectors and retrieving context"
      [32m+[0m[0m id                         = (known after apply)
      [32m+[0m[0m prepare_agent              = true
      [32m+[0m[0m region                     = "us-east-1"
      [32m+[0m[0m skip_resource_in_use_check = false

      [32m+[0m[0m action_group_executor {
          [32m+[0m[0m lambda = (known after apply)
        }

      [32m+[0m[0m api_schema {
          [32m+[0m[0m payload = jsonencode(
                {
                  [32m+[0m[0m info    = {
                      [32m+[0m[0m title   = "Vector Search API"
                      [32m+[0m[0m version = "1.0.0"
                    }
                  [32m+[0m[0m openapi = "3.0.0"
                  [32m+[0m[0m paths   = {
                      [32m+[0m[0m "/search" = {
                          [32m+[0m[0m post = {
                              [32m+[0m[0m description = "Performs vector similarity search to find relevant document chunks"
                              [32m+[0m[0m operationId = "searchVectors"
                              [32m+[0m[0m requestBody = {
                                  [32m+[0m[0m content  = {
                                      [32m+[0m[0m "application/json" = {
                                          [32m+[0m[0m schema = {
                                              [32m+[0m[0m properties = {
                                                  [32m+[0m[0m filters = {
                                                      [32m+[0m[0m description = "Optional filters for the search"
                                                      [32m+[0m[0m type        = "object"
                                                    }
                                                  [32m+[0m[0m query   = {
                                                      [32m+[0m[0m description = "The search query text"
                                                      [32m+[0m[0m type        = "string"
                                                    }
                                                  [32m+[0m[0m top_k   = {
                                                      [32m+[0m[0m default     = 5
                                                      [32m+[0m[0m description = "Number of results to return"
                                                      [32m+[0m[0m type        = "integer"
                                                    }
                                                }
                                              [32m+[0m[0m required   = [
                                                  [32m+[0m[0m "query",
                                                ]
                                              [32m+[0m[0m type       = "object"
                                            }
                                        }
                                    }
                                  [32m+[0m[0m required = true
                                }
                              [32m+[0m[0m responses   = {
                                  [32m+[0m[0m "200" = {
                                      [32m+[0m[0m content     = {
                                          [32m+[0m[0m "application/json" = {
                                              [32m+[0m[0m schema = {
                                                  [32m+[0m[0m properties = {
                                                      [32m+[0m[0m results = {
                                                          [32m+[0m[0m items = {
                                                              [32m+[0m[0m properties = {
                                                                  [32m+[0m[0m chunk_text       = {
                                                                      [32m+[0m[0m type = "string"
                                                                    }
                                                                  [32m+[0m[0m document_id      = {
                                                                      [32m+[0m[0m type = "string"
                                                                    }
                                                                  [32m+[0m[0m metadata         = {
                                                                      [32m+[0m[0m type = "object"
                                                                    }
                                                                  [32m+[0m[0m similarity_score = {
                                                                      [32m+[0m[0m type = "number"
                                                                    }
                                                                }
                                                              [32m+[0m[0m type       = "object"
                                                            }
                                                          [32m+[0m[0m type  = "array"
                                                        }
                                                    }
                                                  [32m+[0m[0m type       = "object"
                                                }
                                            }
                                        }
                                      [32m+[0m[0m description = "Search results"
                                    }
                                }
                              [32m+[0m[0m summary     = "Search for similar vectors"
                            }
                        }
                    }
                }
            )
        }
    }

[1m  # module.bedrock_agent.aws_bedrockagent_agent_alias.agent_alias[0m will be created
[0m  [32m+[0m[0m resource "aws_bedrockagent_agent_alias" "agent_alias" {
      [32m+[0m[0m agent_alias_arn       = (known after apply)
      [32m+[0m[0m agent_alias_id        = (known after apply)
      [32m+[0m[0m agent_alias_name      = "dev"
      [32m+[0m[0m agent_id              = (known after apply)
      [32m+[0m[0m description           = "Alias for dev environment"
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m region                = "us-east-1"
      [32m+[0m[0m routing_configuration = (known after apply)
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.bedrock_agent.aws_bedrockagent_agent_alias.prepared_alias[0m will be created
[0m  [32m+[0m[0m resource "aws_bedrockagent_agent_alias" "prepared_alias" {
      [32m+[0m[0m agent_alias_arn       = (known after apply)
      [32m+[0m[0m agent_alias_id        = (known after apply)
      [32m+[0m[0m agent_alias_name      = "dev-prepared"
      [32m+[0m[0m agent_id              = (known after apply)
      [32m+[0m[0m description           = "Prepared agent alias with all action groups"
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m region                = "us-east-1"
      [32m+[0m[0m routing_configuration = (known after apply)
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.cloudwatch_logs.aws_cloudwatch_dashboard.agent_dashboard[0][0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_dashboard" "agent_dashboard" {
      [32m+[0m[0m dashboard_arn  = (known after apply)
      [32m+[0m[0m dashboard_body = jsonencode(
            {
              [32m+[0m[0m widgets = [
                  [32m+[0m[0m {
                      [32m+[0m[0m properties = {
                          [32m+[0m[0m metrics = [
                              [32m+[0m[0m [
                                  [32m+[0m[0m "AgenticRAG/dev",
                                  [32m+[0m[0m "AgentInvocations",
                                  [32m+[0m[0m {
                                      [32m+[0m[0m period = 300
                                      [32m+[0m[0m stat   = "Sum"
                                    },
                                ],
                            ]
                          [32m+[0m[0m period  = 300
                          [32m+[0m[0m region  = "us-east-1"
                          [32m+[0m[0m title   = "Agent Invocations"
                        }
                      [32m+[0m[0m type       = "metric"
                    },
                  [32m+[0m[0m {
                      [32m+[0m[0m properties = {
                          [32m+[0m[0m metrics = [
                              [32m+[0m[0m [
                                  [32m+[0m[0m "AgenticRAG/dev",
                                  [32m+[0m[0m "AgentErrors",
                                  [32m+[0m[0m {
                                      [32m+[0m[0m period = 300
                                      [32m+[0m[0m stat   = "Sum"
                                    },
                                ],
                            ]
                          [32m+[0m[0m period  = 300
                          [32m+[0m[0m region  = "us-east-1"
                          [32m+[0m[0m title   = "Agent Errors"
                          [32m+[0m[0m yAxis   = {
                              [32m+[0m[0m left = {
                                  [32m+[0m[0m min = 0
                                }
                            }
                        }
                      [32m+[0m[0m type       = "metric"
                    },
                  [32m+[0m[0m {
                      [32m+[0m[0m properties = {
                          [32m+[0m[0m metrics = [
                              [32m+[0m[0m [
                                  [32m+[0m[0m "AgenticRAG/dev",
                                  [32m+[0m[0m "AgentLatency",
                                  [32m+[0m[0m {
                                      [32m+[0m[0m stat = "Average"
                                    },
                                ],
                              [32m+[0m[0m [
                                  [32m+[0m[0m "...",
                                  [32m+[0m[0m {
                                      [32m+[0m[0m stat = "p50"
                                    },
                                ],
                              [32m+[0m[0m [
                                  [32m+[0m[0m "...",
                                  [32m+[0m[0m {
                                      [32m+[0m[0m stat = "p99"
                                    },
                                ],
                            ]
                          [32m+[0m[0m period  = 300
                          [32m+[0m[0m region  = "us-east-1"
                          [32m+[0m[0m title   = "Agent Latency"
                          [32m+[0m[0m yAxis   = {
                              [32m+[0m[0m left = {
                                  [32m+[0m[0m label = "Milliseconds"
                                }
                            }
                        }
                      [32m+[0m[0m type       = "metric"
                    },
                  [32m+[0m[0m {
                      [32m+[0m[0m properties = {
                          [32m+[0m[0m query  = "SOURCE '/aws/bedrock/agentic-rag-demo-dev' | fields @timestamp, @message | sort @timestamp desc | limit 20"
                          [32m+[0m[0m region = "us-east-1"
                          [32m+[0m[0m title  = "Recent Agent Logs"
                        }
                      [32m+[0m[0m type       = "log"
                    },
                ]
            }
        )
      [32m+[0m[0m dashboard_name = "agentic-rag-demo-dev-agent"
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m region         = "us-east-1"
    }

[1m  # module.cloudwatch_logs.aws_cloudwatch_log_group.agent_logs[0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_group" "agent_logs" {
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m deletion_protection_enabled = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m log_group_class             = (known after apply)
      [32m+[0m[0m name                        = "/aws/bedrock/agentic-rag-demo-dev"
      [32m+[0m[0m name_prefix                 = (known after apply)
      [32m+[0m[0m region                      = "us-east-1"
      [32m+[0m[0m retention_in_days           = 7
      [32m+[0m[0m skip_destroy                = false
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "/aws/bedrock/agentic-rag-demo-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Agent execution logs"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "/aws/bedrock/agentic-rag-demo-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Agent execution logs"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.cloudwatch_logs.aws_cloudwatch_log_metric_filter.error_count[0][0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_metric_filter" "error_count" {
      [32m+[0m[0m apply_on_transformed_logs = (known after apply)
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m log_group_name            = "/aws/bedrock/agentic-rag-demo-dev"
      [32m+[0m[0m name                      = "agentic-rag-demo-dev-errors"
      [32m+[0m[0m pattern                   = "[timestamp, request_id, level=ERROR*, ...]"
      [32m+[0m[0m region                    = "us-east-1"

      [32m+[0m[0m metric_transformation {
          [32m+[0m[0m dimensions = {
              [32m+[0m[0m "Environment" = "dev"
              [32m+[0m[0m "Project"     = "agentic-rag-demo"
            }
          [32m+[0m[0m name       = "AgentErrors"
          [32m+[0m[0m namespace  = "AgenticRAG/dev"
          [32m+[0m[0m unit       = "Count"
          [32m+[0m[0m value      = "1"
        }
    }

[1m  # module.cloudwatch_logs.aws_cloudwatch_log_metric_filter.invocation_count[0][0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_metric_filter" "invocation_count" {
      [32m+[0m[0m apply_on_transformed_logs = (known after apply)
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m log_group_name            = "/aws/bedrock/agentic-rag-demo-dev"
      [32m+[0m[0m name                      = "agentic-rag-demo-dev-invocations"
      [32m+[0m[0m pattern                   = "[timestamp, request_id, event_type=INVOCATION*, ...]"
      [32m+[0m[0m region                    = "us-east-1"

      [32m+[0m[0m metric_transformation {
          [32m+[0m[0m dimensions = {
              [32m+[0m[0m "Environment" = "dev"
              [32m+[0m[0m "Project"     = "agentic-rag-demo"
            }
          [32m+[0m[0m name       = "AgentInvocations"
          [32m+[0m[0m namespace  = "AgenticRAG/dev"
          [32m+[0m[0m unit       = "Count"
          [32m+[0m[0m value      = "1"
        }
    }

[1m  # module.cloudwatch_logs.aws_cloudwatch_log_metric_filter.latency[0][0m will be created
[0m  [32m+[0m[0m resource "aws_cloudwatch_log_metric_filter" "latency" {
      [32m+[0m[0m apply_on_transformed_logs = (known after apply)
      [32m+[0m[0m id                        = (known after apply)
      [32m+[0m[0m log_group_name            = "/aws/bedrock/agentic-rag-demo-dev"
      [32m+[0m[0m name                      = "agentic-rag-demo-dev-latency"
      [32m+[0m[0m pattern                   = "[timestamp, request_id, ..., latency_ms=*latency*]"
      [32m+[0m[0m region                    = "us-east-1"

      [32m+[0m[0m metric_transformation {
          [32m+[0m[0m dimensions = {
              [32m+[0m[0m "Environment" = "dev"
              [32m+[0m[0m "Project"     = "agentic-rag-demo"
            }
          [32m+[0m[0m name       = "AgentLatency"
          [32m+[0m[0m namespace  = "AgenticRAG/dev"
          [32m+[0m[0m unit       = "Milliseconds"
          [32m+[0m[0m value      = "$latency"
        }
    }

[1m  # module.iam_roles.data.aws_iam_policy_document.cloudwatch_logs[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "cloudwatch_logs" {
      [32m+[0m[0m id            = (known after apply)
      [32m+[0m[0m json          = (known after apply)
      [32m+[0m[0m minified_json = (known after apply)

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "logs:CreateLogStream",
              [32m+[0m[0m "logs:PutLogEvents",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "WriteCloudWatchLogs"
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "logs:CreateLogGroup",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m "arn:aws:logs:us-east-1:153772056475:log-group:/aws/bedrock/*",
            ]
          [32m+[0m[0m sid       = "CreateLogGroups"
        }
    }

[1m  # module.iam_roles.data.aws_iam_policy_document.s3_documents[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "s3_documents" {
      [32m+[0m[0m id            = (known after apply)
      [32m+[0m[0m json          = (known after apply)
      [32m+[0m[0m minified_json = (known after apply)

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:GetBucketLocation",
              [32m+[0m[0m "s3:ListBucket",
              [32m+[0m[0m "s3:ListBucketVersions",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "ListDocumentsBucket"
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:DeleteObject",
              [32m+[0m[0m "s3:DeleteObjectVersion",
              [32m+[0m[0m "s3:GetObject",
              [32m+[0m[0m "s3:GetObjectVersion",
              [32m+[0m[0m "s3:PutObject",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "ManageDocuments"
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3:GetObjectAttributes",
              [32m+[0m[0m "s3:GetObjectMetadata",
              [32m+[0m[0m "s3:HeadObject",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "GetDocumentMetadata"
        }
    }

[1m  # module.iam_roles.data.aws_iam_policy_document.s3_vectors[0m will be read during apply
  # (config refers to values not yet known)
[0m [36m<=[0m[0m data "aws_iam_policy_document" "s3_vectors" {
      [32m+[0m[0m id            = (known after apply)
      [32m+[0m[0m json          = (known after apply)
      [32m+[0m[0m minified_json = (known after apply)

      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3vectors:GetVectorBucket",
              [32m+[0m[0m "s3vectors:ListVectorBuckets",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "ListVectorBuckets"
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3vectors:DeleteVector",
              [32m+[0m[0m "s3vectors:GetVector",
              [32m+[0m[0m "s3vectors:PutVector",
              [32m+[0m[0m "s3vectors:SearchVectors",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "ManageVectors"
        }
      [32m+[0m[0m statement {
          [32m+[0m[0m actions   = [
              [32m+[0m[0m "s3vectors:DescribeVectorIndex",
              [32m+[0m[0m "s3vectors:QueryVectorIndex",
              [32m+[0m[0m "s3vectors:SearchVectorIndex",
            ]
          [32m+[0m[0m effect    = "Allow"
          [32m+[0m[0m resources = [
              [32m+[0m[0m (known after apply),
            ]
          [32m+[0m[0m sid       = "ManageVectorIndexes"
        }
    }

[1m  # module.iam_roles.aws_iam_policy.bedrock[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "bedrock" {
      [32m+[0m[0m arn              = (known after apply)
      [32m+[0m[0m attachment_count = (known after apply)
      [32m+[0m[0m description      = "Allows agent to invoke Bedrock models"
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m name             = "agentic-rag-demo-agent-role-dev-bedrock"
      [32m+[0m[0m name_prefix      = (known after apply)
      [32m+[0m[0m path             = "/"
      [32m+[0m[0m policy           = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "bedrock:InvokeModelWithResponseStream",
                          [32m+[0m[0m "bedrock:InvokeModel",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = [
                          [32m+[0m[0m "arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-3-5-sonnet-20250110-v1:0",
                          [32m+[0m[0m "arn:aws:bedrock:us-east-1::foundation-model/amazon.titan-embed-text-v2:0",
                        ]
                      [32m+[0m[0m Sid      = "InvokeBedrockModels"
                    },
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "bedrock:ListFoundationModels",
                          [32m+[0m[0m "bedrock:GetFoundationModel",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "*"
                      [32m+[0m[0m Sid      = "ListBedrockModels"
                    },
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "bedrock:InvokeAgent",
                          [32m+[0m[0m "bedrock:GetAgentVersion",
                          [32m+[0m[0m "bedrock:GetAgentAlias",
                          [32m+[0m[0m "bedrock:GetAgent",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = "arn:aws:bedrock:us-east-1:153772056475:agent/*"
                      [32m+[0m[0m Sid      = "AgentOperations"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m policy_id        = (known after apply)
      [32m+[0m[0m tags             = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all         = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.iam_roles.aws_iam_policy.cloudwatch_logs[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "cloudwatch_logs" {
      [32m+[0m[0m arn              = (known after apply)
      [32m+[0m[0m attachment_count = (known after apply)
      [32m+[0m[0m description      = "Allows agent to write logs to CloudWatch"
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m name             = "agentic-rag-demo-agent-role-dev-cloudwatch-logs"
      [32m+[0m[0m name_prefix      = (known after apply)
      [32m+[0m[0m path             = "/"
      [32m+[0m[0m policy           = (known after apply)
      [32m+[0m[0m policy_id        = (known after apply)
      [32m+[0m[0m tags             = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all         = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.iam_roles.aws_iam_policy.s3_documents[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "s3_documents" {
      [32m+[0m[0m arn              = (known after apply)
      [32m+[0m[0m attachment_count = (known after apply)
      [32m+[0m[0m description      = "Allows agent to access S3 documents bucket"
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m name             = "agentic-rag-demo-agent-role-dev-s3-documents"
      [32m+[0m[0m name_prefix      = (known after apply)
      [32m+[0m[0m path             = "/"
      [32m+[0m[0m policy           = (known after apply)
      [32m+[0m[0m policy_id        = (known after apply)
      [32m+[0m[0m tags             = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all         = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.iam_roles.aws_iam_policy.s3_vectors[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "s3_vectors" {
      [32m+[0m[0m arn              = (known after apply)
      [32m+[0m[0m attachment_count = (known after apply)
      [32m+[0m[0m description      = "Allows agent to access S3 Vectors storage"
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m name             = "agentic-rag-demo-agent-role-dev-s3-vectors"
      [32m+[0m[0m name_prefix      = (known after apply)
      [32m+[0m[0m path             = "/"
      [32m+[0m[0m policy           = (known after apply)
      [32m+[0m[0m policy_id        = (known after apply)
      [32m+[0m[0m tags             = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all         = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.iam_roles.aws_iam_role.agent[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "agent" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Condition = {
                          [32m+[0m[0m ArnLike      = {
                              [32m+[0m[0m "aws:SourceArn" = "arn:aws:bedrock:us-east-1:153772056475:agent/*"
                            }
                          [32m+[0m[0m StringEquals = {
                              [32m+[0m[0m "aws:SourceAccount" = "153772056475"
                            }
                        }
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = [
                              [32m+[0m[0m "bedrock.amazonaws.com",
                              [32m+[0m[0m "agentcore.amazonaws.com",
                            ]
                        }
                      [32m+[0m[0m Sid       = "AllowBedrockAgentAssumeRole"
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m description           = "IAM role for agentic-rag-demo agent in dev"
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "agentic-rag-demo-agent-role-dev"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-agent-role-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Bedrock Agent Execution Role"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-agent-role-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Bedrock Agent Execution Role"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
      [32m+[0m[0m unique_id             = (known after apply)
    }

[1m  # module.iam_roles.aws_iam_role_policy_attachment.bedrock[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "bedrock" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = (known after apply)
      [32m+[0m[0m role       = "agentic-rag-demo-agent-role-dev"
    }

[1m  # module.iam_roles.aws_iam_role_policy_attachment.cloudwatch_logs[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "cloudwatch_logs" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = (known after apply)
      [32m+[0m[0m role       = "agentic-rag-demo-agent-role-dev"
    }

[1m  # module.iam_roles.aws_iam_role_policy_attachment.s3_documents[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "s3_documents" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = (known after apply)
      [32m+[0m[0m role       = "agentic-rag-demo-agent-role-dev"
    }

[1m  # module.iam_roles.aws_iam_role_policy_attachment.s3_vectors[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "s3_vectors" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = (known after apply)
      [32m+[0m[0m role       = "agentic-rag-demo-agent-role-dev"
    }

[1m  # module.s3_storage.aws_s3_bucket.documents[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket" "documents" {
      [32m+[0m[0m acceleration_status         = (known after apply)
      [32m+[0m[0m acl                         = (known after apply)
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m bucket                      = "agentic-rag-demo-documents-dev-153772056475"
      [32m+[0m[0m bucket_domain_name          = (known after apply)
      [32m+[0m[0m bucket_prefix               = (known after apply)
      [32m+[0m[0m bucket_region               = (known after apply)
      [32m+[0m[0m bucket_regional_domain_name = (known after apply)
      [32m+[0m[0m force_destroy               = true
      [32m+[0m[0m hosted_zone_id              = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m object_lock_enabled         = (known after apply)
      [32m+[0m[0m policy                      = (known after apply)
      [32m+[0m[0m region                      = "us-east-1"
      [32m+[0m[0m request_payer               = (known after apply)
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-documents-dev-153772056475"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Document storage for RAG system"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-documents-dev-153772056475"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Document storage for RAG system"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
      [32m+[0m[0m website_domain              = (known after apply)
      [32m+[0m[0m website_endpoint            = (known after apply)
    }

[1m  # module.s3_storage.aws_s3_bucket_cors_configuration.documents[0][0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_cors_configuration" "documents" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m region = "us-east-1"

      [32m+[0m[0m cors_rule {
          [32m+[0m[0m allowed_headers = [
              [32m+[0m[0m "*",
            ]
          [32m+[0m[0m allowed_methods = [
              [32m+[0m[0m "DELETE",
              [32m+[0m[0m "GET",
              [32m+[0m[0m "POST",
              [32m+[0m[0m "PUT",
            ]
          [32m+[0m[0m allowed_origins = [
              [32m+[0m[0m "http://localhost:3000",
              [32m+[0m[0m "http://localhost:8501",
            ]
          [32m+[0m[0m expose_headers  = [
              [32m+[0m[0m "ETag",
            ]
          [32m+[0m[0m max_age_seconds = 3600
        }
    }

[1m  # module.s3_storage.aws_s3_bucket_lifecycle_configuration.documents[0][0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_lifecycle_configuration" "documents" {
      [32m+[0m[0m bucket                                 = (known after apply)
      [32m+[0m[0m expected_bucket_owner                  = (known after apply)
      [32m+[0m[0m id                                     = (known after apply)
      [32m+[0m[0m region                                 = "us-east-1"
      [32m+[0m[0m transition_default_minimum_object_size = "all_storage_classes_128K"

      [32m+[0m[0m rule {
          [32m+[0m[0m id     = "delete-incomplete-uploads"
          [32m+[0m[0m status = "Enabled"

          [32m+[0m[0m abort_incomplete_multipart_upload {
              [32m+[0m[0m days_after_initiation = 7
            }
        }
    }

[1m  # module.s3_storage.aws_s3_bucket_policy.documents[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_policy" "documents" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m policy = (known after apply)
      [32m+[0m[0m region = "us-east-1"
    }

[1m  # module.s3_storage.aws_s3_bucket_public_access_block.documents[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_public_access_block" "documents" {
      [32m+[0m[0m block_public_acls       = true
      [32m+[0m[0m block_public_policy     = true
      [32m+[0m[0m bucket                  = (known after apply)
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m ignore_public_acls      = true
      [32m+[0m[0m region                  = "us-east-1"
      [32m+[0m[0m restrict_public_buckets = true
    }

[1m  # module.s3_storage.aws_s3_bucket_server_side_encryption_configuration.documents[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_server_side_encryption_configuration" "documents" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m region = "us-east-1"

      [32m+[0m[0m rule {
          [32m+[0m[0m blocked_encryption_types = []
          [32m+[0m[0m bucket_key_enabled       = false

          [32m+[0m[0m apply_server_side_encryption_by_default {
              [32m+[0m[0m sse_algorithm = "AES256"
            }
        }
    }

[1m  # module.s3_vectors.aws_iam_policy.vector_bucket_access[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_policy" "vector_bucket_access" {
      [32m+[0m[0m arn              = (known after apply)
      [32m+[0m[0m attachment_count = (known after apply)
      [32m+[0m[0m description      = "Allows access to S3 Vector Bucket for agentic-rag-demo"
      [32m+[0m[0m id               = (known after apply)
      [32m+[0m[0m name             = "agentic-rag-demo-vectors-dev-153772056475-access"
      [32m+[0m[0m name_prefix      = (known after apply)
      [32m+[0m[0m path             = "/"
      [32m+[0m[0m policy           = (known after apply)
      [32m+[0m[0m policy_id        = (known after apply)
      [32m+[0m[0m tags             = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all         = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
    }

[1m  # module.s3_vectors.aws_iam_role_policy_attachment.vector_bucket_access["agentic-rag-demo-agent-role-dev"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "vector_bucket_access" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = (known after apply)
      [32m+[0m[0m role       = "agentic-rag-demo-agent-role-dev"
    }

[1m  # module.s3_vectors.aws_s3vectors_index.embeddings[0m will be created
[0m  [32m+[0m[0m resource "aws_s3vectors_index" "embeddings" {
      [32m+[0m[0m creation_time            = (known after apply)
      [32m+[0m[0m data_type                = "float32"
      [32m+[0m[0m dimension                = 1024
      [32m+[0m[0m distance_metric          = "cosine"
      [32m+[0m[0m encryption_configuration = (known after apply)
      [32m+[0m[0m index_arn                = (known after apply)
      [32m+[0m[0m index_name               = "agentic-rag-demo-index-dev"
      [32m+[0m[0m region                   = "us-east-1"
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "Dimensions"  = "1024"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Metric"      = "cosine"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-index-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
        }
      [32m+[0m[0m tags_all                 = {
          [32m+[0m[0m "Dimensions"  = "1024"
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Metric"      = "cosine"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-index-dev"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
      [32m+[0m[0m vector_bucket_name       = "agentic-rag-demo-vectors-dev-153772056475"
    }

[1m  # module.s3_vectors.aws_s3vectors_vector_bucket.vectors[0m will be created
[0m  [32m+[0m[0m resource "aws_s3vectors_vector_bucket" "vectors" {
      [32m+[0m[0m creation_time            = (known after apply)
      [32m+[0m[0m encryption_configuration = (known after apply)
      [32m+[0m[0m force_destroy            = false
      [32m+[0m[0m region                   = "us-east-1"
      [32m+[0m[0m tags                     = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-vectors-dev-153772056475"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Vector embeddings storage for RAG system"
        }
      [32m+[0m[0m tags_all                 = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "terraform"
          [32m+[0m[0m "Name"        = "agentic-rag-demo-vectors-dev-153772056475"
          [32m+[0m[0m "Project"     = "agentic-rag-demo"
          [32m+[0m[0m "Purpose"     = "Vector embeddings storage for RAG system"
          [32m+[0m[0m "Repository"  = "agentic-rag-demo"
        }
      [32m+[0m[0m vector_bucket_arn        = (known after apply)
      [32m+[0m[0m vector_bucket_name       = "agentic-rag-demo-vectors-dev-153772056475"
    }

[1mPlan:[0m 35 to add, 0 to change, 0 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m agent_alias_arn                = (known after apply)
  [32m+[0m[0m agent_alias_id                 = (known after apply)
  [32m+[0m[0m agent_arn                      = (known after apply)
  [32m+[0m[0m agent_config                   = {
      [32m+[0m[0m account_id        = "153772056475"
      [32m+[0m[0m agent_alias_id    = (known after apply)
      [32m+[0m[0m agent_arn         = (known after apply)
      [32m+[0m[0m agent_id          = (known after apply)
      [32m+[0m[0m distance_metric   = "cosine"
      [32m+[0m[0m documents_bucket  = (known after apply)
      [32m+[0m[0m embedding_model   = "amazon.titan-embed-text-v2:0"
      [32m+[0m[0m environment       = "dev"
      [32m+[0m[0m llm_model         = "anthropic.claude-3-5-sonnet-20250110-v1:0"
      [32m+[0m[0m region            = "us-east-1"
      [32m+[0m[0m vector_dimensions = 1024
      [32m+[0m[0m vector_index      = "agentic-rag-demo-index-dev"
      [32m+[0m[0m vectors_bucket    = "agentic-rag-demo-vectors-dev-153772056475"
    }
  [32m+[0m[0m agent_id                       = (known after apply)
  [32m+[0m[0m agent_role_arn                 = (known after apply)
  [32m+[0m[0m agent_role_name                = "agentic-rag-demo-agent-role-dev"
  [32m+[0m[0m aws_console_links              = {
      [32m+[0m[0m agent_console        = (known after apply)
      [32m+[0m[0m cloudwatch_dashboard = "https://us-east-1.console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=agentic-rag-demo-dev-agent"
      [32m+[0m[0m cloudwatch_logs      = "https://us-east-1.console.aws.amazon.com/cloudwatch/home?region=us-east-1#logsV2:log-groups/log-group/$252Faws$252Fbedrock$252Fagentic-rag-demo-dev"
      [32m+[0m[0m s3_documents         = (known after apply)
    }
  [32m+[0m[0m dashboard_name                 = "agentic-rag-demo-dev-agent"
  [32m+[0m[0m document_handler_function_name = "agentic-rag-demo-document-handler-dev"
  [32m+[0m[0m documents_bucket_arn           = (known after apply)
  [32m+[0m[0m documents_bucket_name          = (known after apply)
  [32m+[0m[0m log_group_name                 = "/aws/bedrock/agentic-rag-demo-dev"
  [32m+[0m[0m next_steps                     = (known after apply)
  [32m+[0m[0m search_handler_function_name   = "agentic-rag-demo-search-handler-dev"
  [32m+[0m[0m vector_index_name              = "agentic-rag-demo-index-dev"
  [32m+[0m[0m vectors_bucket_name            = "agentic-rag-demo-vectors-dev-153772056475"
[90m
─────────────────────────────────────────────────────────────────────────────[0m

Saved the plan to: dev.tfplan

To perform exactly these actions, run the following command to apply:
    terraform apply "dev.tfplan"
